package org.regicide.test.SystemOfGrow;

import org.bukkit.Material;
import org.bukkit.block.Biome;
import org.bukkit.block.Block;
import org.bukkit.block.data.Ageable;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.block.BlockGrowEvent;

public class Grow implements Listener
{

    @EventHandler
    public void onBlockGrow(BlockGrowEvent event)
    {
        Block block = event.getBlock();
        Biome biome = block.getBiome();

        if (block.getType() == Material.WHEAT) {
            if (biome == Biome.DESERT) {
                if (block.getState().getData() instanceof org.bukkit.material.Crops) {
                    if (block.getBlockData() instanceof Ageable) {
                        Ageable ageable = (Ageable) block.getBlockData();
                        org.bukkit.material.Crops cropsData = (org.bukkit.material.Crops) block.getState().getData();
                        if (ageable.getAge() < ageable.getMaximumAge()) {
                            cropsData.setData((byte) (cropsData.getData() / 2));
                            block.getState().update();
                        }
                    }
                }
            }

            else if ((biome == Biome.BIRCH_FOREST) || (biome == Biome.RIVER))
            {
                if (block.getState().getData() instanceof org.bukkit.material.Crops) {
                    if (block.getBlockData() instanceof Ageable) {
                        Ageable ageable = (Ageable) block.getBlockData();
                        org.bukkit.material.Crops cropsData = (org.bukkit.material.Crops) block.getState().getData();
                        if (ageable.getAge() < ageable.getMaximumAge()) {
                            cropsData.setData((byte) (cropsData.getData() + 2));
                            block.getState().update();
                        }
                    }
                }
            }

            else if (biome == Biome.END_MIDLANDS)
            {
                if (block.getState().getData() instanceof org.bukkit.material.Crops) {
                    if (block.getBlockData() instanceof Ageable) {
                        Ageable ageable = (Ageable) block.getBlockData();
                        org.bukkit.material.Crops cropsData = (org.bukkit.material.Crops) block.getState().getData();
                        if (ageable.getAge() < ageable.getMaximumAge()) {
                            cropsData.setData((byte) (cropsData.getData() + 3));
                            block.getState().update();
                        }
                    }
                }
            }

            else {
// Обычная скорость роста пшеницы в остальных биомах
                if (block.getData() < 7) {
                    //block.setBlockData(block.getBlockData() ++);
                }
            }
        }
    }



}
